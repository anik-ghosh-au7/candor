{"version":3,"sources":["../../src/routes/message.js"],"names":["dotenv","config","authenticateToken","req","res","next","token","cookies","redirect","jwt","verify","process","env","jwt_key","err","data","status","send","msg","user","router","express","Router","post","message_controller","handle_incoming","module","exports"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA;;AACAA,mBAAOC,MAAP;;AACA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1C,MAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAY,UAAZ,CAAd;;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAOF,GAAG,CAACI,QAAJ,CAAa,kBAAb,CAAP;AACD;;AACDC,2BAAIC,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,OAA9B,EAAuC,UAACC,GAAD,EAAMC,IAAN,EAAe;AACpD,QAAID,GAAJ,EAAS,OAAOV,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,GAAG,EAAE;AAAN,KAArB,CAAP;AACTf,IAAAA,GAAG,CAACgB,IAAJ,GAAWJ,IAAX;AACAV,IAAAA,IAAI;AACL,GAJD;AAKD,CAVH;;AAWA,IAAMe,MAAM,GAAEC,oBAAQC,MAAR,EAAd;;AAEAF,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAgBrB,iBAAhB,EAAkCsB,oBAAmBC,eAArD;AAEAC,MAAM,CAACC,OAAP,GAAeP,MAAf","sourcesContent":["import express from 'express';\nimport message_controller from '../controller/message.controller';\nimport jwt from 'jsonwebtoken';\nimport dotenv from 'dotenv';\ndotenv.config();\nconst authenticateToken = (req, res, next) => {\n    const token = req.cookies['awtToken'];\n    if (!token) {\n      return res.redirect('/users/loginPage');\n    }\n    jwt.verify(token, process.env.jwt_key, (err, data) => {\n      if (err) return res.status(403).send({msg: 'Unauthorized Forbidden'});\n      req.user = data;\n      next();\n    });\n  };\nconst router= express.Router();\n\nrouter.post('/',authenticateToken,message_controller.handle_incoming);\n\nmodule.exports=router;\n"],"file":"message.js"}
{"version":3,"sources":["../../src/routes/home.js"],"names":["express","require","router","Router","jwt","config","authenticateToken","req","res","next","token","cookies","redirect","verify","process","env","jwt_key","err","data","status","send","msg","user","get","render","module","exports"],"mappings":";;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;;AACA,IAAIC,GAAG,GAAGH,OAAO,CAAC,cAAD,CAAjB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBI,MAAlB;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC5C,MAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAY,UAAZ,CAAd;;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAOF,GAAG,CAACI,QAAJ,CAAa,kBAAb,CAAP;AACD;;AACDR,EAAAA,GAAG,CAACS,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,OAA9B,EAAuC,UAACC,GAAD,EAAMC,IAAN,EAAe;AACpD,QAAID,GAAJ,EAAS,OAAOT,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,GAAG,EAAE;AAAN,KAArB,CAAP;AACTd,IAAAA,GAAG,CAACe,IAAJ,GAAWJ,IAAX;AACAT,IAAAA,IAAI;AACL,GAJD;AAKD,CAVD;AAYA;;;AACAP,MAAM,CAACqB,GAAP,CAAW,GAAX,EAAejB,iBAAf,EAAkC,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACzDD,EAAAA,GAAG,CAACgB,MAAJ,CAAW,MAAX,EAAkBjB,GAAG,CAACe,IAAtB;AACD,CAFD;AAIAG,MAAM,CAACC,OAAP,GAAiBxB,MAAjB","sourcesContent":["var express = require('express');\nvar router = express.Router();\nvar jwt = require('jsonwebtoken');\nrequire('dotenv').config();\n\n\nconst authenticateToken = (req, res, next) => {\n  const token = req.cookies['awtToken'];\n  if (!token) {\n    return res.redirect('/users/loginPage');\n  }\n  jwt.verify(token, process.env.jwt_key, (err, data) => {\n    if (err) return res.status(403).send({msg: 'Unauthorized Forbidden'});\n    req.user = data;\n    next()\n  });\n};\n\n/* GET home page. */\nrouter.get('/',authenticateToken, function(req, res, next) {\n  res.render('home',req.user);\n});\n\nmodule.exports = router;\n"],"file":"home.js"}
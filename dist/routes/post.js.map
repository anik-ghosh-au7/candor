{"version":3,"sources":["../../src/routes/post.js"],"names":["express","require","router","Router","jwt","request","post_controller","app","config","authenticateToken","req","res","next","token","cookies","redirect","verify","process","env","jwt_key","err","user","status","send","msg","post","createPost","createComment","get","renderPost","getdata","updateLike","getTrendingTags","module","exports"],"mappings":";;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;;AACA,IAAIC,GAAG,GAAGH,OAAO,CAAC,cAAD,CAAjB;;eACkBA,OAAO,CAAC,SAAD,C;IAAlBI,O,YAAAA,O;;gBACqBJ,OAAO,CAAC,+BAAD,C;IAA9BK,e,aAAAA,e;IAAgBC,G,aAAAA,G;;AACrBN,OAAO,CAAC,QAAD,CAAP,CAAkBO,MAAlB;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1C,MAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAY,UAAZ,CAAd;;AACA,MAAI,CAACD,KAAL,EAAY;AACR,WAAOF,GAAG,CAACI,QAAJ,CAAa,kBAAb,CAAP;AACH;;AACDX,EAAAA,GAAG,CAACY,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,OAA9B,EAAuC,UAACC,GAAD,EAAMC,IAAN,EAAe;AAClD,QAAID,GAAJ,EAAS,OAAOT,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,GAAG,EAAE;AAAN,KAArB,CAAP;AACTd,IAAAA,GAAG,CAACW,IAAJ,GAAWA,IAAX;AACAT,IAAAA,IAAI;AACP,GAJD;AAKH,CAVD;;AAYAV,MAAM,CAACuB,IAAP,CAAY,UAAZ,EAAwBhB,iBAAxB,EAA2CH,eAAe,CAACoB,UAA3D;AACAxB,MAAM,CAACuB,IAAP,CAAY,aAAZ,EAA0BhB,iBAA1B,EAA4CH,eAAe,CAACqB,aAA5D;AACAzB,MAAM,CAAC0B,GAAP,CAAW,SAAX,EAAqBnB,iBAArB,EAAwCH,eAAe,CAACuB,UAAxD;AACA3B,MAAM,CAAC0B,GAAP,CAAW,UAAX,EAAuBtB,eAAe,CAACwB,OAAvC;AACA5B,MAAM,CAAC0B,GAAP,CAAW,OAAX,EAAmBnB,iBAAnB,EAAqCH,eAAe,CAACyB,UAArD;AACA7B,MAAM,CAAC0B,GAAP,CAAW,OAAX,EAAmBtB,eAAe,CAAC0B,eAAnC;AACAC,MAAM,CAACC,OAAP,GAAiBhC,MAAjB","sourcesContent":["var express = require('express');\nvar router = express.Router();\nvar jwt = require('jsonwebtoken');\nconst {request} = require('express');\nvar {post_controller,app} = require('../controller/post.controller');\nrequire('dotenv').config();\n\n\nconst authenticateToken = (req, res, next) => {\n    const token = req.cookies['awtToken'];\n    if (!token) {\n        return res.redirect('/users/loginPage');\n    }\n    jwt.verify(token, process.env.jwt_key, (err, user) => {\n        if (err) return res.status(403).send({msg: 'Unauthorized Forbidden'});\n        req.user = user;\n        next()\n    });\n};\n\nrouter.post('/addpost', authenticateToken, post_controller.createPost);\nrouter.post('/addcomment',authenticateToken,post_controller.createComment);\nrouter.get('/render',authenticateToken, post_controller.renderPost);\nrouter.get('/getdata', post_controller.getdata);\nrouter.get('/like',authenticateToken,post_controller.updateLike);\nrouter.get('/tags',post_controller.getTrendingTags);\nmodule.exports = router;\n"],"file":"post.js"}